Step 5:
Allocate the right value

#####

{ S =i {v} ++ S1  /\  S1 =i {}  /\  not (r == 0) ; r :-> 0}

void foo(loc r, int v)

{ not (Y == 0)  /\  S =i {v1} ++ Z1 ; r :-> Y ** [Y, 2] ** Y :-> v1 ** (Y + 1) :-> nxt}

#####

void foo (loc r, int v) {
  let Y = malloc(2);
  *r = Y;
  *Y = v;
}